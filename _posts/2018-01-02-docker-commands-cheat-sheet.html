---
layout: post
status: publish
published: true
title: Docker Commands Cheat Sheet
header-img: "img/Featured-Image-Docker-Command-Cheat-Sheet.png"
author:
  display_name: Stefan Thorpe
  login: stefan
  email: stefan@caylent.com
  url: ''
author_login: stefan
author_email: stefan@caylent.com
wordpress_id: 2314
wordpress_url: https://caylent.com/?p=2314
date: '2018-01-02 08:00:48 +0200'
date_gmt: '2018-01-02 16:00:48 +0200'
categories:
- Docker
tags:
- Docker commands
- Cheat sheet
comments: []
---
{% raw %}
<p>Given our affinity for Docker, we wanted to pass along some tips and best practices for using it at the command-line. To do that we&rsquo;ve created a convenient Docker Commands Cheat Sheet to help improve your work flow. Now, you can avoid having to search for these shortcuts every time you open the software. Neat, right?</p>
<p>For those who are relatively new to container technology, Docker&rsquo;s complexity lies in its diffuse set of commands. Once you understand the basic structure, leveraging the command-line is straightforward.</p>
<h1>Docker Commands Basic Structure:</h1>
<p>It&rsquo;s useful to understand the structure and syntax of a Docker command to execute them properly. By adhering to this best practice format, you should then always get your desired results.<br />
To begin, here are some of the key terms you&rsquo;ll come across when using Docker.</p>
<h2>Key Terms:</h2>
<ul>
<li><strong>Image</strong> &mdash; A snapshot file of a container. Create containers by pulling and running Docker Images.</li>
<li><strong>Docker Hub / Registry</strong> &mdash; A public cloud-based registry service for developers to share their code on.</li>
<li><strong>[options]</strong> &mdash; Add options to your Docker commands to change the results. Each command has multiple options available.</li>
<li><strong>[command]</strong> &mdash; Enter the parameters for the Docker command, this could be a filename or container ID.</li>
<li><strong>[arg]</strong> &mdash; Set additional argument variables.</li>
<li><strong>[env]</strong> &mdash; Use to configure environment variables.</li>
<li><strong>[init]</strong> &mdash; Initialize a swarm (by default, Docker will designate chosen machine as manager node).</li>
<li><strong>[ca]</strong> &mdash; Show root Certificate Authority (auto-generated by init command).</li>
<li><strong>[join]</strong> &mdash; Join a swarm as a worker/manager node.</li>
<li><strong>[join-token]</strong> &mdash; Manage join tokens&mdash;define worker or manager accordingly.</li>
<li><strong>[leave]</strong> &mdash; When implemented on a worker, the command prompts the node to leave the swarm.</li>
<li><strong>[--force]</strong> &mdash; When implemented on a manager, the command forces the node to leave the swarm.</li>
<li><strong>[tag]</strong> &mdash; The tag parameter is often part of the image name, but as your swarm develops you can adjust the tag without changing the base image name.</li>
<li><strong>[unlock]</strong> &mdash; Unlock swarm manager with a user-own unlock key.</li>
<li><strong>[unlock-key]</strong> &mdash; Manage the unlock key, useful to unlock a manager node.</li>
<li><strong>[update]</strong> &mdash; Update the swarm.</li>
</ul>
<p>Let&rsquo;s put some of these key terms into context.</p>
<h2>Run:</h2>
<p>This is often one of the first commands everyone learns when they begin using Docker. Initiating &lsquo;<span style="font-family: 'Courier New';">docker run</span>&rsquo; will create and start a container in the same operation&mdash;where &lsquo;<span style="font-family: 'Courier New';">docker create</span>&rsquo; only builds a container and needs further &lsquo;<span style="font-family: 'Courier New';">start</span>&rsquo; and &lsquo;<span style="font-family: 'Courier New';">stop</span>&rsquo; requests made to get it running.</p>
<p>Furthermore, if you want to keep your container running you need to specify that, so use the command:</p>
<p style="font-family: 'Courier New';">docker run --name container_name docker_image</p>
<p>Referencing the &lsquo;<span style="font-family: 'Courier New';">--name</span>&rsquo; allows you to start and stop the container specifically.</p>
<p>Other useful flags to attach to the &lsquo;docker run&rsquo; command are:</p>
<ul>
<li><span style="font-family: 'Courier New';">-d</span> &mdash; Detach container on start</li>
<li><span style="font-family: 'Courier New';">-rm</span> &mdash; Remove container once it stops</li>
<li><span style="font-family: 'Courier New';">-p</span> &mdash; Publish host IP and host port to the container port (e.g. docker run host_ip:host_port:container_port)</li>
<li><span style="font-family: 'Courier New';">-v</span> &mdash; Define volume mounts to share storage volume across containers</li>
<li><span style="font-family: 'Courier New';">--read-only</span> &mdash; Sets container to be read-only</li>
</ul>
<h2>Orchestration:</h2>
<p>Initialize the swarm by logging into your lead server and automatically designating it manager status:</p>
<p style="font-family: 'Courier New';">docker swarm init --advertise-addr server_ip_address</p>
<p>Each manager node automatically creates a new root Certificate Authority (CA) with a key pair. On top of that, using the command auto-generates a worker node token to enable other machines to join the swarm.</p>
<p>Paste the worker token you receive into other servers to join the swarm as worker nodes. For an in-depth guide to this process, read our post on <a href="https://caylent.com/high-availability-docker-swarm-aws/" target="_blank" rel="noopener">Creating a High-Availability Docker Swarm on AWS</a></p>
<p>If you lose this token at any time, just SSH back into a manager server and run:</p>
<p style="font-family: 'Courier New';">docker swarm join <worker> token</p>
<p>To get the manager join command:</p>
<p style="font-family: 'Courier New';">docker swarm join <manager> token</p>
<p>To view the status of nodes within a swarm:</p>
<p style="font-family: 'Courier New';">docker node ls</p>
<p>OR</p>
<p>To view all running swarms:</p>
<p style="font-family: 'Courier New';">docker stack ls</p>
<p>With those basics out the way, it&rsquo;s worth knowing how to promote a worker node to manager&nbsp;status. Get the &lsquo;<span style="font-family: 'Courier New';">node_name</span>&rsquo; from the Docker node list and use:</p>
<p style="font-family: 'Courier New';">docker node promote node_name</p>
<h2>Build:</h2>
<p>Let&rsquo;s build! A Docker container is essentially a set of processes running in contained isolation with a preconfigured file system attached. Put simply, a container is a collection of processes that have access to the same files in the image.</p>
<p>Docker images are all publicly available. They do perform within a hierarchy, so images will have certain dependencies on others. To pull an image from the Registry, define the <span style="font-family: 'Courier New';">image_name</span> and use the command:</p>
<p style="font-family: 'Courier New';">docker pull image_name:tag</p>
<p>To build an image from your Dockerfile:</p>
<p style="font-family: 'Courier New';">docker build -t image_name:tag</p>
<p>The '<span style="font-family: 'Courier New';">-t</span>' flag tags the image with a helpful repository name and tag.</p>
<p>If you don&rsquo;t want your container to autostart, as with the &lsquo;<span style="font-family: 'Courier New';">run</span>&rsquo; command, use:</p>
<p style="font-family: 'Courier New';">docker create --name container_name image_name:tag</p>
<p>Establish the &lsquo;<span style="font-family: 'Courier New';">--name</span>&rsquo; criteria at this point, or by default, Docker will assign one for you. Naming makes it easy for you to reference the container when executing commands. Now use:</p>
<p style="font-family: 'Courier New';">docker start container_name</p>
<p>&amp;</p>
<p style="font-family: 'Courier New';">docker stop container_name</p>
<p>These commands will start and stop the container use respectively. For every stop command, there&rsquo;s also a more forceful &lsquo;<span style="font-family: 'Courier New';">kill</span>&rsquo; version too which will end the process with a lot less grace.</p>
<h2>Services:</h2>
<p>A service is defined as a group of containers with the same '<span style="font-family: 'Courier New';">image:tag</span>', and a collection of services is known as a stack. Creating and adapting services allows you to scale your application.</p>
<p>Note: Before deploying a service, you need to have at least one node running.</p>
<p>To view a list of all the services running in a swarm:</p>
<p style="font-family: 'Courier New';">docker service ls</p>
<p>To see all running services:</p>
<p style="font-family: 'Courier New';">docker stack services stack_name</p>
<p>To go in depth into a stack and see all service logs, define the specific &lsquo;<span style="font-family: 'Courier New';">stack_name_ + service_name</span>&rsquo; in the following command:</p>
<p style="font-family: 'Courier New';">docker service logs stack_name_service_name</p>
<p>Want to scale? Create more instances of a service and scale them quickly across qualified nodes:</p>
<p style="font-family: 'Courier New';">docker service scale stack_name_service_name=replicas</p>
<p>For example:</p>
<p style="font-family: 'Courier New';">docker service scale caylent_api=5</p>
<h2>Clean-Up:</h2>
<p>As with any project, it&rsquo;s important to keep your workspace tidy. To rid yourself of unused containers and images that take up precious disk space, here are a few clean-up commands.</p>
<p>To clean&mdash;or prune&mdash;unused (dangling) images:<br />
(Note: These commands will prompt a &lsquo;<span style="font-family: 'Courier New';">WARNING!</span>&rsquo; alert asking if you&rsquo;re sure you want to continue, simply enter y to move forward.)</p>
<p style="font-family: 'Courier New';">docker image prune</p>
<p>To remove all images which are not in use by existing containers, add the <span style="font-family: 'Courier New';">-a</span> flag:</p>
<p style="font-family: 'Courier New';">docker image prune -a</p>
<p>Unless you started a container with <span style="font-family: 'Courier New';">--rm</span>, it will not be automatically removed. Use '<span style="font-family: 'Courier New';">docker ps -a</span> to view everything, then delete all stopped containers with:</p>
<p style="font-family: 'Courier New';">docker container prune</p>
<p>To prune your entire system&mdash;including images, containers, and networks&mdash;use:<br />
(Note: With version Docker 17.06.1 and higher, you must include the <span style="font-family: 'Courier New';">--volumes</span> flag too for this command to prune volumes.)</p>
<p style="font-family: 'Courier New';">docker system prune</p>
<p>You&rsquo;ll receive this alert to be sure you wish to continue:</p>
<p style="font-family: 'Courier New';">WARNING! This will remove:<br />
- all stopped containers<br />
- all networks not used by at least one container<br />
- all dangling images<br />
- all build cache<br />
Are you sure you want to continue? [y/N] y</p>
<p>To leave a swarm:</p>
<p style="font-family: 'Courier New';">docker swarm leave</p>
<p>To remove a swarm:<br />
(Be warned! This will delete all volume data and database information also!)</p>
<p style="font-family: 'Courier New';">docker stack rm stack_name</p>
<p>To kill all running containers: (As mentioned, this is an all or nothing command.)</p>
<p style="font-family: 'Courier New';">docker kill $(docker ps -q)</p>
<h2>Finally:</h2>
<p>Here are a few other useful commands to help you get started, ones we think are worth keeping at hand.</p>
<p>To view all running containers:</p>
<p style="font-family: 'Courier New';">docker ps</p>
<p>And for more information on any Docker command, run:</p>
<p style="font-family: 'Courier New';">docker swarm command --help</p>
<p>Find the most important of these commands and a Docker Commands basic structure reminder on our attached&nbsp;<a href="https://caylent.com/wp-content/uploads/2017/12/Docker-Commands-Cheat-Sheet.pdf" target="_blank" rel="noopener">Docker Commands Cheat Sheet</a>. An all in one PDF to keep at hand.</p>
<p>If you're interested in automating your container launch process, then I'd like to invite you to check out Caylent, a SaaS platform which makes it easy to deploy stacks, apps, and containers. Best of all, it is free to get started.&nbsp;<a href="https://goo.gl/mjg13M" target="_blank" rel="noopener">Sign up here today!</a></p>
<p>As always, we'd love your feedback and suggestions for future articles.</p>
{% endraw %}
