---
layout: post
status: publish
published: true
title: Create a Laravel Application in Docker
author:
  display_name: JP La Torre
  login: caylent
  email: jp@caylent.com
  url: ''
author_login: caylent
author_email: jp@caylent.com
wordpress_id: 1007
wordpress_url: http://blog.caylent.com/?p=1007
date: '2016-08-08 07:40:56 +0300'
date_gmt: '2016-08-08 14:40:56 +0300'
categories:
- Docker
- Intern Series
- Laravel
tags:
- Docker
- Intern
- Laravel
- Laravel application
- Docker containers
- Caylent API
- Dockerfile
- Docker images
comments:
- id: 8
  author: Aaron McMillin
  author_email: amcmillin@jbecker.com
  author_url: ''
  date: '2016-08-17 11:29:49 +0300'
  date_gmt: '2016-08-17 18:29:49 +0300'
  content: You're doing COPY's of setup-laravel.sh and 000-default.conf, but there's
    no instructions to create those locally.
- id: 9
  author: produit bio
  author_email: margot.wright@gmail.com
  author_url: http://essentielbio.org
  date: '2016-08-18 19:19:27 +0300'
  date_gmt: '2016-08-19 02:19:27 +0300'
  content: "[* Shield plugin marked this comment as \"trash\". Reason: Failed GASP
    Bot Filter Test (checkbox) *]\nLes grandes voutes, presque coupoles, des cathedrales
    d'Angers et de \nPoitiers, sont decorees d'arcs-ogives tres-minces, sans utilite,\net
    qui, au lieu de porter les remplissages, sont portes par eux au moyen de queues
    penetrant dans les aretes a peine saillantes de ces voutes.\n\n\nAlso visit my
    web page :: <a href=\"http://essentielbio.org\" rel=\"nofollow\">produit bio</a>"
- id: 10
  author: uudzilekha
  author_email: akeqka@popp.eamale.com
  author_url: http://onlinewithoutprescriptionpropecia.net/
  date: '2016-11-05 13:37:07 +0200'
  date_gmt: '2016-11-05 20:37:07 +0200'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    [url=http://buy-pillsviagra.org/]buy-pillsviagra.org.ankor[/url] <a href="http://priceslevitra-generic.com/" rel="nofollow">priceslevitra-generic.com.ankor</a> http://onlinewithoutprescriptionpropecia.net/
- id: 11
  author: aiqubiy
  author_email: arabeyoxi@popp.eamale.com
  author_url: http://onlinewithoutprescriptionpropecia.net/
  date: '2016-11-05 14:26:20 +0200'
  date_gmt: '2016-11-05 21:26:20 +0200'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    [url=http://buy-pillsviagra.org/]buy-pillsviagra.org.ankor[/url] <a href="http://priceslevitra-generic.com/" rel="nofollow">priceslevitra-generic.com.ankor</a> http://onlinewithoutprescriptionpropecia.net/
- id: 12
  author: Ahsgdfloqifg
  author_email: admin_4@iphone-ipad-mac.xyz
  author_url: http://iphone-ipad-mac.xyz
  date: '2016-11-08 09:27:54 +0200'
  date_gmt: '2016-11-08 17:27:54 +0200'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    Pgksrjgiohi  hw hweokfjeq ojfe jfweiogwo gwoj wijf gdhgtrj575 y6u75tyhgf 5yu5regr
- id: 13
  author: StephenFenry
  author_email: stephenusabe@mail.ru
  author_url: http://texaslre.org/buy-Paragon-NTFS-14
  date: '2016-11-10 01:23:38 +0200'
  date_gmt: '2016-11-10 09:23:38 +0200'
  content: "[* Shield plugin marked this comment as \"trash\". Reason: Failed GASP
    Bot Filter Test (checkbox) *]\ndiscount Adobe Captivate 5 http://www.rt149.nl/nieuws/with-discount-Microsoft-OneNote-2013
    - With discount Microsoft OneNote 2013, with discount Microsoft Office PowerPoint
    2010   purchase Nik Software Dfine 2.0 http://www.rt149.nl/nieuws/with-discount-Macromates-TextMate
    - With discount Macromates TextMate, with discount ACDSee Canvas 11 with GIS Module
    \  purchase on line Corel Painter 2016 http://texaslre.org/discount-Microsoft-Visual-Studio-Professional-2015
    - Discount Microsoft Visual Studio Professional 2015, with discount Autodesk Quantity
    Takeoff 2012   purchase on line Windows Server 2012 R2 Datacenter http://marcantoine.com/buy-online-Avanquest-PowerDesk-Pro-7
    - Buy online Avanquest PowerDesk Pro 7, where to buy Autodesk AutoCad Architecture
    2012  purchase on line DS Catia v5 http://marcantoine.com/buy-online-Lynda.com---Outlook-2013-Essential-Training
    - Buy online Lynda.com - Outlook 2013 Essential Training, purchase online Lynda.com
    - Photoshop for Designers: Filters \nwith discount Roxio Creator 2011 Pro http://www.successbc.ca/eng/with-cheap-price-Adobe-Creative-Suite-6-Master-Collection
    - With cheap price Adobe Creative Suite 6 Master Collection, cheap Autodesk AutoCAD
    Civil 3D 2011   discount Adobe Acrobat XI Standard Student and Teacher Edition
    http://chielimusic.com/buy-Apple-Mac-OS-X-10.6-Snow-Leopard - Buy Apple Mac OS
    X 10.6 Snow Leopard, cheap price Microsoft Works 9   cheap price MathWorks PTC
    MathCAD 14 http://www.successbc.ca/eng/purchase-Atomix-VirtualDJ-Pro-7 - Purchase
    Atomix VirtualDJ Pro 7, cheap price Hazel 3   buy Adobe Audition 2 http://www.successbc.ca/eng/where-to-buy-Microsoft-Office-2013
    - Where to buy Microsoft Office 2013, discount Corel Ventura 10  with discount
    Luxion KeyShot Pro 4 + Animation + KeyShotVR http://texaslre.org/buy-online-Lynda.com---Photoshop-Insider-Training:-Photo-Restoration
    - Buy online Lynda.com - Photoshop Insider Training: Photo Restoration, buy Lynda.com
    - JavaScript Essential Training"
- id: 14
  author: Iopafeopt
  author_email: admin_1@iphone-ipad-mac.xyz
  author_url: http://iphone-ipad-mac.xyz
  date: '2016-11-11 03:12:56 +0200'
  date_gmt: '2016-11-11 11:12:56 +0200'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    Ugireojfe whfiwehfjwehwhfjehfwefhweh 777uiop fweh iwehf weiohf wieohf iwehf iweyu59tu328hfire iuwfodhqw934785 h3urh9wjfwgut h9wh9889wh98r h4wt93qrj29th2 rj2ghw9tfq.
- id: 15
  author: JosephHon
  author_email: josephthalo@mail.ru
  author_url: http://savethebayoffundy.ca/spy-software-facebook-free
  date: '2016-11-16 19:11:39 +0200'
  date_gmt: '2016-11-17 03:11:39 +0200'
  content: "[* Shield plugin marked this comment as \"trash\". Reason: Failed GASP
    Bot Filter Test (checkbox) *]\nBest phone spy android http://clubofamericanford.se/wordpress/index.php/is-cell-phone-spyware-legal
    - Is cell phone spyware legal, App tracker for ios   Spy calc iphone password
    http://nsnonprofitconsulting.com/whatsapp-spy-hack-tool - Whatsapp spy hack tool,
    Free trial cell phone spy   Dual mode call blocker http://nsnonprofitconsulting.com/como-instalar-whatsapp-spy-sh4x
    - Como instalar whatsapp spy sh4x, Cell phone spyware symptoms   App i spy http://jeffkashiwa.com/total-spy-android-full
    - Total spy android full, Free iphone spy sms app  Gps tracker for cars walmart
    http://totalband.org/?page_id=spy-gear-for-cell-phone - Spy gear for cell phone,
    Cell phone spy tools \nIphone spy software cheap http://blog.omarmusic.com/mobile-spy-java-app
    - Mobile spy java app, Know where phone tracker   Free nuisance call blocker http://nsnonprofitconsulting.com/setting-up-cpr-call-blocker
    - Setting up cpr call blocker, Descargar whatsapp spy sin sms   Android app hours
    tracker http://nsnonprofitconsulting.com/incoming-call-blocker-blackberry - Incoming
    call blocker blackberry, Does iphone spy you   Spy pic app iphone http://blog.omarmusic.com/spy-mobile-free-download
    - Spy mobile free download, Microsoft phone tracker  Stealthgenie mobile spy software
    free download http://nsnonprofitconsulting.com/call-blocker-4.2.48.20 - Call blocker
    4.2.48.20, Iphone 4 remove spyware"
- id: 16
  author: inhouse pharmacy
  author_email: fredericnovak8191@goooogle.usa.cc
  author_url: http://tinyurl.com/j7a425c
  date: '2016-11-22 14:48:37 +0200'
  date_gmt: '2016-11-22 22:48:37 +0200'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    Wow, lovely website. Thnx ... http://tinyurl.com/j7a425c
- id: 17
  author: ekosrebo
  author_email: obupidn@newmail.printemailtext.com
  author_url: http://without-prescription-onlinepropecia.net/
  date: '2016-12-02 15:41:53 +0200'
  date_gmt: '2016-12-02 23:41:53 +0200'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    [url=http://viagracheapestprice-pills.org/]viagracheapestprice-pills.org.ankor[/url] <a href="http://levitrafor-salegeneric.com/" rel="nofollow">levitrafor-salegeneric.com.ankor</a> http://without-prescription-onlinepropecia.net/
- id: 18
  author: BernardNic
  author_email: bernardmix@mail.ru
  author_url: http://ipas2sales.com/grundschule-blog-deutsch
  date: '2016-12-15 05:09:35 +0200'
  date_gmt: '2016-12-15 13:09:35 +0200'
  content: "[* Shield plugin marked this comment as \"trash\". Reason: Failed GASP
    Bot Filter Test (checkbox) *]\ngeschichte schreiben lassen seminararbeit stress
    \ http://choiceofgreatness.com/aufsatz-aufbau - Aufsatz aufbaubericht beispiel
    zeitung  \nbewerbung professionell erstellen lassen  [url=http://classifieds.24hourhomebusiness.com/bewerbungsschreiben-auf-franzГ&para;sisch-beispiel]Bewerbungsschreiben
    auf franzГ&para;sisch beispiel[/url]sommerferien aufsatz deutsch  \n[url=http://bosseswebbiz.net/bachelorarbeit-lebensmitteltechnologie-stellenangebote]Bachelorarbeit
    lebensmitteltechnologie stellenangebote[/url]\n \ninternetquellen bei hausarbeiten
    kleine hausarbeit jura uni kГ&para;ln  http://anygateway.com/notes/index.php?q=Гјbungen-zeitformen-deutsch-klasse-4
    - Гјbungen zeitformen deutsch klasse 4schreiben einer doktorarbeit  \nbachelorarbeit
    burnout  [url=http://anygateway.com/notes/index.php?q=aufsatz-waschschale]Aufsatz
    waschschale[/url]deutsch grammatik Гјbungen 5 klasse  \npromotion die medizinische
    doktorarbeit  [url=http://compatiblemedia.co.uk/less/index.php?q=unterrichtseinheit-vorgangsbeschreibung-grundschule]Unterrichtseinheit
    vorgangsbeschreibung grundschule[/url]seminararbeit kolloquium"
- id: 19
  author: manicure
  author_email: epifania.farber@bigstring.com
  author_url: http://www.computersolutionsandsupport.com/__media__/js/netsoltrademark.php?d=sweetasmoiok.com
  date: '2017-03-09 11:47:43 +0200'
  date_gmt: '2017-03-09 19:47:43 +0200'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    This piece of writing is in fact a nice one it helps new the web people, who are wishing for blogging.


    My web blog :: <a href="http://www.computersolutionsandsupport.com/__media__/js/netsoltrademark.php?d=sweetasmoiok.com" rel="nofollow">manicure</a>
- id: 20
  author: ehamafkopdukl
  author_email: umimavev@pop.eamale.com
  author_url: http://online-viagracanada.net/
  date: '2017-04-03 23:32:56 +0300'
  date_gmt: '2017-04-04 06:32:56 +0300'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    [url=http://usa-onlineprednisone.net/]usa-onlineprednisone.net.ankor[/url] <a href="http://salbutamol-ventolin-buy.net/" rel="nofollow">salbutamol-ventolin-buy.net.ankor</a> http://online-viagracanada.net/
- id: 21
  author: aezuuxor
  author_email: idodita@as.eamale.com
  author_url: http://online-viagracanada.net/
  date: '2017-04-06 15:10:54 +0300'
  date_gmt: '2017-04-06 22:10:54 +0300'
  content: |-
    [* Shield plugin marked this comment as "trash". Reason: Failed GASP Bot Filter Test (checkbox) *]
    [url=http://usa-onlineprednisone.net/]usa-onlineprednisone.net.ankor[/url] <a href="http://salbutamol-ventolin-buy.net/" rel="nofollow">salbutamol-ventolin-buy.net.ankor</a> http://online-viagracanada.net/
---
<p>Our API is written in Laravel, and we run it in production using Docker. So naturally one of the first tasks we had for George, one of our Summer interns, was to familiarize himself with Docker to understand more about our stack. He picked it up fairly quickly, and we decided to turn his experience into a blog post to share his learning curve.</p>
<p style="text-align: right;"><strong>&mdash; Preface by JP La Torre, Co-Founder &amp; CEO at <a href="https://caylent.com">Caylent</a></strong></p>
<h2><strong>Introduction</strong></h2>
<p><span style="font-weight: 400;">Docker is now &ldquo;the world&rsquo;s leading software containerization platform,&rdquo; providing a platform for you to develop your applications. Using Docker can help majorly reduce anxiety about the discrepancies that exist between your development and production/deployment environments. </span>The platform makes use of container technology, which&nbsp;provides much of the functionality of traditional hypervisors (which includes virtual machines) at a fraction of the cost.</p>
<p>Essentially, containers are a lightweight alternative to virtual machines which enable developers to quickly deploy their applications in a production setting. Instead of requiring separate copies of both OS and hardware resources (RAM and CPU) that virtual machines rely on, container technology uses local OS and hardware by partitioning the resources into separate containers. Each container is thus able to run its own process/application in an isolated environment. Docker&rsquo;s container technology is also able to provide a supportive environment for development, testing, and deployment.</p>
<p><span style="font-weight: 400;">How does Docker come into play in this article? As Docker streamlines the development and deployment process, I wanted to write a guide to Dockerize (the means by which you ready an application to run inside a Docker container) a simple Laravel application.</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">A general three-step process occurs when you Dockerize any application:</span></p>
<ol>
<li><span style="font-weight: 400;">Write a Dockerfile: A text file that contains a bunch of preloaded bash commands to provide the default states for parameters, application, and resources. </span></li>
<li><span style="font-weight: 400;">Build the Dockerfile to produce a Docker image: A snapshot of the application.&nbsp;</span></li>
<li><span style="font-weight: 400;">Run the Docker image: To launch a Docker container that your application runs in.</span></li>
</ol>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">Now let&rsquo;s get started! </span></p>
<h2><strong>A Step-by-Step Process </strong>to<strong> Creating a Laravel Application</strong></h2>
<p><span style="font-weight: 400;">Begin by downloading Docker from </span><a href="https://docs.docker.com/"><span style="font-weight: 400;">https://docs.docker.com/</span></a><span style="font-weight: 400;"> for either Mac, Linux or Windows. Once installed, open up a command line/terminal window.</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">Make a new directory/folder to house your eventual Dockerfile and access the folder. Enter the commands:</span></p>
<p>&nbsp;</p>
<pre><code>mkdir <name of directory of your choice></code></pre>
<p><span style="font-weight: 400;">Example: mkdir helloworld</span></p>
<p>&nbsp;</p>
<pre><code>cd <into the directory you just created></code></pre>
<p><span style="font-weight: 400;">Example: cd helloworld</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">With the directory and cd set up, we move to actual Docker-related steps!</span></p>
<h2><strong>Write a Dockerfile:</strong></h2>
<p><span style="font-weight: 400;">Create a Dockerfile using the command:</span></p>
<pre><code>touch Dockerfile</code></pre>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">The Dockerfile is now editable. Open up your favorite text editor, I personally use Sublime, and within the command line type:</span></p>
<pre><code>subl Dockerfile</code></pre>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">This should open your Dockerfile within the Sublime text editor. From here, we write our first Dockerfile to build our first Docker image. Don't be alarmed that we haven't touched Laravel. Dockerfile's brilliance is that commands can be scripted within the Dockerfile to install Laravel. Remember, a Dockerfile is simply a text file that contains a bunch of preloaded bash commands to provide the default states for parameters, application, and resources. Check out the bash and Docker-specific commands for use within your Dockerfile. </span></p>
<p>&nbsp;</p>
<h3>For the Curious Reader</h3>
<p><span style="font-weight: 400;">Some Docker specific commands briefly listed below.</span></p>
<p>&nbsp;</p>
<ul>
<li><span style="font-weight: 400;">FROM tells you what the base image your docker container is running. It&rsquo;s the foundation to build the rest of your image on.</span></li>
<li><span style="font-weight: 400;">MAINTAINER simply tracks who the author of the Dockerfile is.</span></li>
<li><span style="font-weight: 400;">RUN executes a command(s) in a new layer and creates a new image. It is often used for installing software packages.</span></li>
<li><span style="font-weight: 400;">CMD sets default command and/or parameters. Overwrite defaults from the command line at any point.</span></li>
<li><span style="font-weight: 400;">ENTRYPOINT configures a container that will run as an executable.</span></li>
</ul>
<p>&nbsp;</p>
<h2><strong>Build the Dockerfile to Produce a Docker Image:</strong></h2>
<p><span style="font-weight: 400;">We use Ubuntu (version 14.04) for the base image, making the command we type into the Dockerfile:</span><span style="font-weight: 400;"><br />
</span></p>
<pre><code>FROM ubuntu:14.04</code></pre>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">To attribute authorship, we use the MAINTAIN command as such:</span></p>
<pre><code>MAINTAINER George J. <your.name@email.com></code></pre>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">We now have the basic foundation of our Dockerfile using FROM and MAINTAIN. If we use RUN here, we can really get into the meat of the Dockerfile. The below RUN command will set up the necessary default packages for the container to run our Laravel application (note: &amp;&amp; \ signals the RUN command to continue onto the next line).</span></p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<pre><code>RUN apt-get update &amp;&amp; \ 
    apt-get -y install apache2 php5 libapache2-mod-php5 php5-mcrypt php5-json curl git &amp;&amp; \ 
    apt-get clean &amp;&amp; \ update-rc.d apache2 defaults &amp;&amp; \ 
    php5enmod mcrypt &amp;&amp; \ 
    rm -rf /var/www/html &amp;&amp; \ 
    curl -sS https://getcomposer.org/installer | php &amp;&amp; \ 
    mv composer.phar /usr/local/bin/composer</code></pre>
<p>&nbsp;</p>
<h3>What Are We Doing Here in the RUN Block?</h3>
<p><span style="font-weight: 400;">The RUN block command updates to the newest versions of packages and their dependencies. It achieves this by:</span></p>
<ul>
<li><span style="font-weight: 400;">Installing Apache2, PHP5, and the PHP library for Apache on top of the other technologies needed for our container. </span></li>
<li><span style="font-weight: 400;">Downloading Composer (a subsidiary technology used by Laravel) and moving it into our usr/local/bin/composer directory for our container. </span></li>
<li><span style="font-weight: 400;">Setting up a Docker suitable environment for the Laravel application build.</span></li>
</ul>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">After installing all the prerequisite packages, we are using Composer's "create-project" function to create a new Laravel application.</span></p>
<p>&nbsp;</p>
<pre><code>RUN composer create-project laravel/laravel laravel $LARAVEL_VERSION --prefer-dist --no-interaction &amp;&amp; \<span style="font-weight: 400;">    
    php laravel/artisan key:generate &amp;&amp; \</span>
<span style="font-weight: 400;">    chown www-data:www-data -R laravel/storage</span></code></pre>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">After we&rsquo;ve set up our default Laravel application, it is now important to have our container be receptive to HTTP and HTTPS ports using TCP/IP conventions. To do this, we can implement:</span></p>
<p><span style="font-weight: 400;">EXPOSE 80</span></p>
<p><span style="font-weight: 400;">EXPOSE 443</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">To run our Laravel application on the Apache web server; we now need to provide some default states for the server with the command:</span></p>
<p><span style="font-weight: 400;">CMD ["/usr/sbin/apache2ctl", "-D", "FOREGROUND"]</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">The Dockerfile is now complete. </span></p>
<h3>Full Documentation of the Dockerfile</h3>
<p><span style="font-weight: 400;"># Use this as a base image</span></p>
<p><span style="font-weight: 400;">FROM ubuntu:14.04</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;"># Optional: specify the maintainer</span></p>
<p>MAINTAINER George J. <your.name@email.com></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">ENV LARAVEL_VERSION ~5.1.0</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;"># Run any command on terminal</span></p>
<p><span style="font-weight: 400;">RUN apt-get update &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;apt-get -y install apache2 php5 libapache2-mod-php5 php5-mcrypt php5-json curl git &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;apt-get clean &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;update-rc.d apache2 defaults &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;php5enmod mcrypt &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;rm -rf /var/www/html &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;curl -sS https://getcomposer.org/installer | php &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;mv composer.phar /usr/local/bin/composer</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">COPY 000-default.conf /etc/apache2/sites-available/000-default.conf</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;"># Install Laravel</span></p>
<p><span style="font-weight: 400;">WORKDIR /var/www</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">RUN composer create-project laravel/laravel laravel $LARAVEL_VERSION --prefer-dist --no-interaction &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;php laravel/artisan key:generate &amp;&amp; \</span></p>
<p><span style="font-weight: 400;"> &nbsp;&nbsp;&nbsp;chown www-data:www-data -R laravel/storage</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;"># To EXPOSE necessary ports to the container</span></p>
<p><span style="font-weight: 400;">EXPOSE 80</span></p>
<p><span style="font-weight: 400;">EXPOSE 443</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;"># COPY setup-laravel.sh </span></p>
<p><span style="font-weight: 400;">#/setup-laravel.sh</span></p>
<p><span style="font-weight: 400;">#RUN ["chmod", "+x", "/setup-laravel.sh"]</span></p>
<p><span style="font-weight: 400;">#ENTRYPOINT ["/setup-laravel.sh"]</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">CMD ["/usr/sbin/apache2ctl", "-D", "FOREGROUND"]</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">To actually build the Dockerfile into a Docker image, let&rsquo;s go back into the terminal window and type the command: </span></p>
<p><span style="font-weight: 400;">docker build
<the file path to your directory></span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">Remember, as my directory was helloworld, the full command would be:</span></p>
<p><span style="font-weight: 400;">docker build /george/Desktop/helloworld</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">The program will immediately build an image for you, which you can see right away by running the command:</span></p>
<p><span style="font-weight: 400;">docker images </span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">The command will reveal all Docker images on your local computer; both created images/those pulled from DockerHub&mdash;a repository for Docker images.</span></p>
<h2><strong>Run the Docker Image:</strong></h2>
<p><span style="font-weight: 400;">To run the Docker image, loading your Laravel application into a container, first identify the IMAGEID of your Docker image. For this, run the command:</span></p>
<p><span style="font-weight: 400;">docker images</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">After locating the IMAGEID (which is usually a big number), you can run the command:</span></p>
<p><span style="font-weight: 400;">docker run -d -P IMAGEID</span></p>
<p><span style="font-weight: 400;">//example: docker run -d -P 2173891279</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">-d and -P are simply tags to include alongside any bash commands that tell your container what the specific features of the run command to use. </span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">-d simply daemonizes it and runs the container in the background</span></p>
<p><span style="font-weight: 400;">-P finds the next available port for HTTP (80 on container) and HTTPS (443 on container)</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">The container now listens to port 80 and port 443&mdash;the -P essentially binds each of these ports on the container to a port on your local computer (aka localhost). Go back into the&nbsp;terminal window and type the command:</span></p>
<p><span style="font-weight: 400;">docker ps</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">Now you&rsquo;ll be able to see which to which port your localhost has binded. It should resemble the form 0.0.0.0.50454, where 50454 is the port. Here, 50454 is just an example port. Your individual port could be different.</span></p>
<p>&nbsp;</p>
<p>To complete this step, open up your favorite web browser (Safari, Chrome, Firefox, etc.). Type in: localhost: PORT (where PORT is the value of your port)</p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">In our case, we type into our web browser: </span></p>
<p><span style="font-weight: 400;">http://localhost:50454</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">Run the local URL to see a page with Laravel 5 pop up! Congrats on writing your first Laravel application. For more information on container technology and it's endless potential read our blog post on how to&nbsp;<strong><a class="row-title" href="http://caylent.com/high-availability-docker-swarm-aws/" target="_blank" rel="noopener" aria-label="&ldquo;Setup a High-Availability Docker Swarm Stack on AWS&rdquo; (Edit)">Setup a High-Availability Docker Swarm Stack on AWS</a>.</strong></span></p>
